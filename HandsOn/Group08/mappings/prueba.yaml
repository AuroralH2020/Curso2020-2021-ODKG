prefixes:
  
    s: "http://schema.org/" 
    owl: "http://www.w3.org/2002/07/owl#"
    rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xml: "http://www.w3.org/XML/1998/namespace"
    xsd: "http://www.w3.org/2001/XMLSchema#"
    rdfs: "http://www.w3.org/2000/01/rdf-schema#"
    base: "http://www.publicProcurementMurciaCOVID19.es/ontology/ont#"
  
mappings:
  
  covidstatusmap:
    sources:
      - [agregados-updated.csv~csv]
	  - [datos_ccaas_updated.csv~csv]
    s: http://www.publicProcurementMurciaCOVID19.es/ontology/ont#$(CovidStatusID)
    po:
      - [a, base:CovidStatus]
      - [base:numPositivePCR,$(PCR+) ,xsd:integer]
      - [base:numberDeaths,$(Fallecidos) ,xsd:integer]
      - [base:numberUCI,$(UCI) ,xsd:integer]
      - [base:numberHospitalizations,$(Hospitalizados) ,xsd:integer]
      - p: base:inDate
        o:
          - mapping: datemap
            condition:
              function: equal
              parameters:
                - [str1, $(FECHA)]
                - [str2, $(FECHA)]
      - [base:numPositiveAC,$(num_casos_prueba_test_ac) ,xsd:integer]
	  - [base:numPositiveOther,$(num_casos_pruebas_otras) ,xsd:integer]	
	  - [base:numPositiveUnknown,$(num_casos_prueba_desconocida) ,xsd:integer]	
	  - [base:totalCases,$(num_casos) ,xsd:integer]	
	
  ccaamap:
    sources:
      - [agregados-updated.csv~csv]
    s: http://www.publicProcurementMurciaCOVID19.es/ontology/ont#$(CCAA)
    po:
      - [a, s:Organization]
      - [base:hasISOCode ,$(CCAA),xsd:string]
      - p: base:hasCovidStatus
        o:
          - mapping: covidstatusmap
            condition:
              function: equal
              parameters:
                - [str1, $(CovidStatusID)]
                - [str2, $(CovidStatusID)]
      
      
  datemap:
    sources:
      - [agregados-updated.csv~csv]
    s: http://www.publicProcurementMurciaCOVID19.es/ontology/ont#$(FECHA)
    po:
      - [a, s:Date]
       
 
  ordermap:
    sources:
      - [ContratosEmergenciaSMS-updated.csv~csv]
    s: http://www.publicProcurementMurciaCOVID19.es/ontology/ont#$(OrderID)
    po:
      - [a, s:Order]
      - [s:customer, base:MC ]
      - p: s:orderDate
        o:
          - mapping: datemap
            condition:
              function: equal
              parameters:
                - [str1, $(Fecha)]
                - [str2, $(FECHA)]
      - p: s:seller
        o:
          - mapping: organizationmap
            condition:
              function: equal
              parameters:
                - [str1, $(OrganizationURI)]
                - [str2, $(OrganizationURI)] 
      
  organizationmap:
    sources:
      - [ContratosEmergenciaSMS-updated.csv~csv]
    s: http://www.publicProcurementMurciaCOVID19.es/ontology/ont#$(OrganizationURI)
    po:
      - [a, s:Organization]
      - [s:name, $(Adjudicatario),xsd:string]
      - [s:taxID, $(NIF),xsd:string]
      
  orderitemmap:
    sources:
      - [ContratosEmergenciaSMS-updated.csv~csv]
    s: http://www.publicProcurementMurciaCOVID19.es/ontology/ont#$(OrderItemID)
    po:
      - [a, s:OrderItem]
      
